@using COMP4952_Sockim.Data
@using COMP4952_Sockim.Models
@using Microsoft.AspNetCore.SignalR.Client

@if (User is not null
    && Chats is not null
    && ChatHubConnection is not null)
{
    @foreach(ChatDto chat in Chats)
    {
        <button type="button" @onclick="() => OpenChat(chat)">@chat.ChatName</button>
        <hr />
        <br />
    }
}

@code {
    [Parameter]
    public EventCallback<ChatDto> ChatOpened { get; set; }
    [Parameter]
    public HubConnection? ChatHubConnection { get; set; }
    [Parameter]
    public List<ChatDto>? Chats { get; set; }
    [Parameter]
    public ChatUser? User { get; set; }

    private async Task OpenChat(ChatDto chat)
    {
        await ChatOpened.InvokeAsync(chat);
    }
}